# Развертывание Stories в Production

## Подготовка

1. **Подключитесь к production серверу**
2. **Перейдите в директорию проекта**
3. **Установите переменные окружения:**

```bash
export PRODUCTION_ADMIN_EMAIL=admin@nplanner.ru
export PRODUCTION_ADMIN_PASSWORD=ваш_реальный_пароль
```

## Вариант 1: Автоматический запуск (рекомендуется)

```bash
./deploy_stories_production.sh
```

## Вариант 2: Ручной запуск

```bash
# Установка зависимостей (если нужно)
npm install axios dotenv

# Запуск скрипта
node deploy_stories_metadata_field.js
```

## Что делает скрипт

- ✅ Проверяет существование поля metadata
- ✅ Создает поле metadata (тип: json) если его нет
- ✅ Добавляет тип контента "Stories" в список доступных типов
- ✅ Обновляет схему Directus
- ✅ Тестирует работоспособность

## После развертывания

1. **Поле metadata** будет доступно в коллекции campaign_content
2. **Тип "Stories"** появится в селекторе типов контента
3. **Stories редактор** будет полностью функционален

## Проверка результата

В интерфейсе Directus:
- Откройте коллекцию campaign_content
- Проверьте наличие поля metadata (тип: json)
- В приложении выберите "Создать контент" → тип "Stories"

## В случае ошибок

Проверьте:
- Правильность учетных данных администратора
- Доступность Directus API (https://directus.nplanner.ru)
- Права доступа пользователя к изменению схемы

## Контакты для поддержки

Если возникнут проблемы, проверьте логи выполнения скрипта - там будет подробная информация об ошибках.