#!/bin/bash

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ YouTube OAuth –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ"
echo "=================================="

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
PROD_URL="https://smm.nplanner.ru"
PROD_API_URL="$PROD_URL/api"

echo "üì° –ü—Ä–æ–¥–∞–∫—à–µ–Ω URL: $PROD_URL"
echo ""

# 1. –ü—Ä–æ–≤–µ—Ä–∏–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API
echo "1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API..."
curl -s -o /dev/null -w "HTTP Status: %{http_code}\n" "$PROD_API_URL/auth/me" || echo "‚ùå API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
echo ""

# 2. –ü—Ä–æ–≤–µ—Ä–∏–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
echo "2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 401)..."
curl -s "$PROD_API_URL/auth/me" | head -100
echo ""

# 3. –¢–µ—Å—Ç–∏—Ä—É–µ–º YouTube OAuth –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ 
echo "3Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä—É–µ–º YouTube OAuth start (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 401)..."
curl -s -X POST "$PROD_API_URL/youtube/auth/start" \
  -H "Content-Type: application/json" \
  -d '{"campaignId": "test"}' | head -100
echo ""

# 4. –ü—Ä–æ–≤–µ—Ä–∏–º –∑–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–µ—Ä–∞
echo "4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–µ—Ä–∞..."
curl -s "$PROD_URL/health" | head -100 || echo "‚ùå Health endpoint –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
echo ""

# 5. –ü—Ä–æ–≤–µ—Ä–∏–º –ª–æ–≥–∏ —á–µ—Ä–µ–∑ API (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
echo "5Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ª–æ–≥–æ–≤..."
curl -s -o /dev/null -w "HTTP Status: %{http_code}\n" "$PROD_API_URL/logs" || echo "‚ùå Logs endpoint –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
echo ""

echo "‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
echo "üí° –î–ª—è –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω—É–∂–Ω—ã –¥–µ–π—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–∫–µ–Ω—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏"