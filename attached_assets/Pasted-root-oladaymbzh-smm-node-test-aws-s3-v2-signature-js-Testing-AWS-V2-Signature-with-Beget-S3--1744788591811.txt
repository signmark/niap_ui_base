root@oladaymbzh:~/smm# node test-aws-s3-v2-signature.js
=== Testing AWS V2 Signature with Beget S3 ===

1. List all buckets:
Executing GET request to / with AWS V2 signature...
String to Sign (V2): GET


Wed, 16 Apr 2025 07:29:42 GMT
/
Generated V2 Signature: 1EMN+NMrcjGlkNZHdH0X+RUfwDI=
Final URL: https://s3.ru1.storage.beget.cloud/
Final Headers: {
  Host: 's3.ru1.storage.beget.cloud',
  Date: 'Wed, 16 Apr 2025 07:29:42 GMT',
  Authorization: 'AWS 9GKHSCY027DGMDRR7682:1EMN+NMrcjGlkNZHdH0X+RUfwDI='
}
ERROR: Request failed with status code 403
Response Status: 403
Response Data: <?xml version="1.0" encoding="UTF-8"?><Error><Code>SignatureDoesNotMatch</Code><Message></Message><RequestId>tx000004c74d2d9e1abd609-0067ff5c66-23e312-default</RequestId><HostId>23e312-default-default</HostId></Error>

2. Check bucket existence:
Executing HEAD request to /6e679636ae90-ridiculous-seth with AWS V2 signature...
String to Sign (V2): HEAD


Wed, 16 Apr 2025 07:29:42 GMT
/6e679636ae90-ridiculous-seth
Generated V2 Signature: 8CLkalS39nfCVMuXePGNrhSHZ/w=
Final URL: https://s3.ru1.storage.beget.cloud/6e679636ae90-ridiculous-seth
Final Headers: {
  Host: 's3.ru1.storage.beget.cloud',
  Date: 'Wed, 16 Apr 2025 07:29:42 GMT',
  Authorization: 'AWS 9GKHSCY027DGMDRR7682:8CLkalS39nfCVMuXePGNrhSHZ/w='
}
ERROR: Request failed with status code 403
Response Status: 403
Response Data:

3. List files in bucket:
Executing GET request to /6e679636ae90-ridiculous-seth with AWS V2 signature...
String to Sign (V2): GET


Wed, 16 Apr 2025 07:29:42 GMT
/6e679636ae90-ridiculous-seth
Generated V2 Signature: jvWAhTMUu/kJlaai8QDSVpxBBss=
Final URL: https://s3.ru1.storage.beget.cloud/6e679636ae90-ridiculous-seth
Final Headers: {
  Host: 's3.ru1.storage.beget.cloud',
  Date: 'Wed, 16 Apr 2025 07:29:42 GMT',
  Authorization: 'AWS 9GKHSCY027DGMDRR7682:jvWAhTMUu/kJlaai8QDSVpxBBss='
}
ERROR: Request failed with status code 403
Response Status: 403
Response Data: <?xml version="1.0" encoding="UTF-8"?><Error><Code>SignatureDoesNotMatch</Code><Message></Message><RequestId>tx00000aa708de05d25a069-0067ff5c66-6a94ec-default</RequestId><HostId>6a94ec-default-default</HostId></Error>
root@oladaymbzh:~/smm#