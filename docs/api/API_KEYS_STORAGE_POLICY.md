# Политика хранения API ключей

## Принципы хранения API ключей

Важное замечание: **ВСЕ API ключи хранятся в базе данных (таблица `user_api_keys`), а НЕ в локальном хранилище!**

### Преимущества хранения в БД
- Централизованное хранение для всех пользователей
- Повышенная безопасность - ключи не хранятся на клиенте
- Возможность быстро обновить/аннулировать ключи при необходимости
- Общий доступ к ключам для системных сервисов

### Таблица `user_api_keys` содержит:
- `id` - уникальный идентификатор
- `user_id` - ID пользователя (может быть как конкретный пользователь, так и системный)
- `service_name` - название сервиса (perplexity, deepseek, fal_ai, apify, xmlriver, и т.д.)
- `api_key` - значение API ключа

### Доступные API сервисы:
- Perplexity - для генерации текста и анализа трендов
- DeepSeek - альтернативный AI движок для генерации
- FAL.AI - генерация изображений
- XMLRiver - для работы с Яндекс.Вордстат
- Apify - для сбора данных из социальных сетей

### Процесс получения ключей:
1. При инициализации сервиса запрашивается ключ из БД для конкретного пользователя
2. Если ключ не найден для конкретного пользователя, используется общий ключ из БД
3. В случае отсутствия ключа в БД, система может использовать значение из переменной окружения (только для разработки)
