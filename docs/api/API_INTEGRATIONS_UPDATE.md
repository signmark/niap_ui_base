# Изменения в API интеграциях

## Поиск источников vs. Сбор трендов

В системе реализованы две похожие, но разные функции:

### 1. Поиск источников (Search Button - "Искать упоминания")

- **Назначение**: Находит социальные аккаунты и источники, соответствующие ключевым словам кампании
- **API Endpoint**: `/api/sources/collect`
- **Метод обработки**: Прямой запрос к Perplexity API для поиска источников
- **UI Компонент**: `SearchButton.tsx` и `NewSourcesDialog.tsx`
- **Результат**: Список аккаунтов, которые можно добавить в кампанию как источники контента

### 2. Сбор трендов (Social Network Selector - "Собрать тренды")

- **Назначение**: Собирает контент (посты, публикации) из выбранных платформ на основе существующих источников в кампании
- **Метод обработки**: Отправляет запрос на n8n webhook
- **UI Компонент**: `SocialNetworkSelectorDialog.tsx`
- **Результат**: Список трендовых постов от источников, связанных с кампанией

## Обновления интеграций (2025-03-24)

- Удалена интеграция с Social Searcher для функции поиска источников
- Модифицирован эндпоинт `/api/sources/collect` для использования только Perplexity API
- Устранено дублирование функционала между поиском источников и сбором трендов
- Кэширование результатов API запросов для улучшения производительности

## Перспективы развития

- Добавить поддержку дополнительных платформ для поиска источников
- Улучшить фильтрацию источников по релевантности
- Оптимизировать работу с API ключами в системе

## Схема взаимодействия компонентов

```
Поиск источников:
  UI: SearchButton → API: /api/sources/collect → Perplexity API → NewSourcesDialog

Сбор трендов:
  UI: SocialNetworkSelectorDialog → n8n webhook → сохранение трендов в базе данных
```