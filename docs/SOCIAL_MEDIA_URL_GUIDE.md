# Руководство по формированию URL для социальных платформ

Данный документ описывает правильный способ формирования URL для публикаций в различных социальных платформах. 

## Telegram

### Формат URL

URL для публикаций в Telegram должен иметь следующий формат:

1. **Для публичных каналов и групп с username**:
   ```
   https://t.me/{username}/{message_id}
   ```
   Пример: `https://t.me/my_channel/123`

2. **Для приватных каналов без username**:
   ```
   https://t.me/c/{channel_id}/{message_id}
   ```
   Пример: `https://t.me/c/1234567890/123`
   
   Примечание: `channel_id` для приватных каналов - это числовой ID канала без префикса `-100`.

### Порядок определения URL

1. Получить ID сообщения из ответа API (`message_id`)
2. Проверить наличие username канала:
   - Если username известен, использовать формат для публичных каналов
   - Если username неизвестен, использовать формат для приватных каналов
3. Сохранить полный URL в соответствующее поле в базе данных

### Важные моменты

- ID сообщения всегда получается из успешного ответа API Telegram
- Для каждого нового сообщения - отдельный уникальный message_id
- При отправке группы изображений ID сообщения берется из первого элемента массива ответа
- Username канала рекомендуется сохранять после первой успешной публикации для повторного использования

## Instagram

### Формат URL

URL для публикаций в Instagram имеет следующий формат:
```
https://www.instagram.com/p/{media_id}/
```
Пример: `https://www.instagram.com/p/CxXXxXXxXxX/`

### Порядок определения URL

1. Получить ID медиа из ответа API (`id`)
2. Сформировать URL по вышеуказанному формату
3. Сохранить полный URL в соответствующее поле в базе данных

## VK

### Формат URL

URL для публикаций в VK имеет следующий формат:
```
https://vk.com/wall-{group_id}_{post_id}
```
Пример: `https://vk.com/wall-123456789_987654321`

### Порядок определения URL

1. Получить ID публикации из ответа API (`post_id`)
2. Определить ID группы/сообщества (`group_id`)
3. Сформировать URL по вышеуказанному формату
4. Сохранить полный URL в соответствующее поле в базе данных

## Общие рекомендации

1. Всегда проверять, что URL содержит необходимые идентификаторы
2. Логировать процесс формирования URL для отладки
3. Проверять валидность сформированного URL перед сохранением
4. Хранить составляющие URL (ID сообщения, ID канала) отдельно для возможной перегенерации URL