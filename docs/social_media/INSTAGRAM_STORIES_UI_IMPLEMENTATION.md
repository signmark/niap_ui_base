# Техническое задание на реализацию UI для Instagram Stories в SMM Manager

## 1. Общее описание

Необходимо разработать интерфейс для создания, редактирования и планирования публикаций Instagram Stories в рамках существующей системы SMM Manager. Интерфейс должен обеспечивать удобный пользовательский опыт, отражать особенности Stories как специфического типа контента и интегрироваться с существующими механизмами публикации и планирования.

## 2. Изменения в существующем интерфейсе

### 2.1 Создание нового контента

#### 2.1.1 Тип контента "Stories"

- Добавить в выпадающий список типов контента новый тип "Instagram Stories".
- При выборе типа "Instagram Stories" автоматически устанавливать платформу Instagram как единственную доступную для публикации.
- Визуально выделить тип "Instagram Stories" особым стилем или иконкой.

#### 2.1.2 Форма создания контента

- При выборе типа "Instagram Stories" форма должна адаптироваться:
  - Поле "Заголовок" должно содержать автоматический префикс "[STORIES]" (добавляется при сохранении).
  - Компонент загрузки изображений должен быть ограничен вертикальными пропорциями 9:16 (соотношение Stories).
  - Видеоконтент ограничен 15 секундами (согласно ограничениям Instagram Stories).
  - Текстовое поле должно иметь ограничение в 2200 символов (лимит Instagram).

#### 2.1.3 Предпросмотр

- Добавить вкладку "Предпросмотр Stories", которая отображает:
  - Вертикальный макет изображения/видео в формате Stories.
  - Наложение текста в стиле, близком к Instagram.
  - Возможность перетаскивания и изменения размера текстовых блоков.

### 2.2 Редактирование существующего контента

- Для существующего контента добавить возможность изменить тип на "Instagram Stories".
- При такой конвертации отображать предупреждение: "Будет доступна публикация только в Instagram".
- Автоматически добавлять маркер "[STORIES]" в заголовок при конвертации в Stories.

### 2.3 Планирование публикации

#### 2.3.1 Интерфейс планирования

- При типе контента "Instagram Stories" отображать только Instagram в списке платформ.
- Если пользователь пытается выбрать другие платформы, показывать пояснение: "Stories могут быть опубликованы только в Instagram".
- Добавить визуальный индикатор, что контент будет опубликован как Stories.

#### 2.3.2 Календарь публикаций

- В календаре публикаций отмечать Stories специальным значком.
- При наведении на публикацию в календаре отображать тип контента "Instagram Stories".
- В фильтрах календаря добавить возможность фильтрации по типу "Instagram Stories".

## 3. Новые компоненты интерфейса

### 3.1 Редактор Stories

Разработать специализированный редактор Stories со следующими функциями:

- Визуальный редактор с вертикальной областью 9:16.
- Возможность добавления наклеек, GIF, эмодзи (опционально).
- Инструменты для рисования и добавления текста (опционально).
- Предварительно загруженные шаблоны фонов для Stories (опционально).
- Компонент наложения эффектов и фильтров на изображение/видео (опционально).

### 3.2 Менеджер Stories

- Создать отдельный раздел "Instagram Stories" в основном меню.
- В менеджере Stories отображать:
  - Список всех созданных и опубликованных Stories.
  - Статус каждой публикации (опубликована, запланирована, черновик, ошибка).
  - Статистику просмотров, если доступна через API (опционально).
  - Архив Stories с возможностью повторной публикации.

### 3.3 Stories Analytics Dashboard

- Создать специализированный дашборд для аналитики Stories (опционально).
- Отображать для каждой Stories:
  - Количество просмотров
  - Количество ответов
  - Количество пользователей, перешедших по ссылке
  - Время активной жизни (24 часа)
  - Сравнение с другими Stories

## 4. Адаптация существующих компонентов

### 4.1 Компонент выбора платформ

- Модифицировать существующий компонент выбора платформ:
  - При типе "Instagram Stories" автоматически выбирать только Instagram.
  - Делать другие платформы недоступными для выбора (отображать серым).
  - Добавить всплывающую подсказку о причине недоступности других платформ.

### 4.2 Компонент статусов публикации

- Добавить специальный статус для Stories:
  - "Active" - если Stories сейчас активна (в рамках 24 часов).
  - "Expired" - если 24 часа истекли.
- Реализовать визуальный индикатор оставшегося времени жизни Stories (опционально).

### 4.3 Компонент загрузки медиа

- Адаптировать компонент загрузки медиа для Stories:
  - Добавить функцию автоматического кадрирования для соотношения 9:16.
  - Добавить проверку размера и длительности медиа (до 15 секунд для видео).
  - Реализовать предупреждение, если медиа не соответствует рекомендациям для Stories.

## 5. Интеграция с бэкендом

### 5.1 API взаимодействие

- Использовать существующие API-эндпоинты с добавлением параметра `content_type: 'stories'`.
- При создании/редактировании контента типа Stories:
  - Устанавливать атрибут `contentType: 'stories'`.
  - Автоматически добавлять маркер "[STORIES]" в заголовок.
  - Устанавливать `isStories: true` для надежного определения.

### 5.2 Обработка ошибок

- Расширить обработку ошибок публикации Stories:
  - Отображать специфические для Stories ошибки понятным языком.
  - Предлагать способы решения типичных проблем с публикацией.
  - Добавить кнопку повторной попытки публикации при сбое.

## 6. Пользовательский опыт

### 6.1 Подсказки и обучение

- Добавить контекстные подсказки о специфике работы со Stories:
  - Объяснение 24-часового лимита жизни Stories.
  - Рекомендации по оптимальным размерам изображений/видео.
  - Советы по созданию эффективных Stories.

### 6.2 Модальные окна и уведомления

- Реализовать специфические для Stories уведомления:
  - Уведомление об успешной публикации с отсчетом 24 часов активности.
  - Предупреждение при приближении к окончанию активности Stories.
  - Уведомление о завершении срока жизни Stories.

## 7. Мобильная адаптация

- Адаптировать все компоненты Stories для мобильных устройств:
  - Оптимизировать редактор для работы на мобильных устройствах.
  - Реализовать жесты для удобного управления Stories на мобильных устройствах.
  - Адаптировать предпросмотр для корректного отображения на различных разрешениях.

## 8. Технические требования к реализации

### 8.1 Фронтенд компоненты

- Использовать React с TypeScript для всех новых компонентов.
- Стилизацию реализовать с использованием Tailwind CSS, следуя дизайн-системе.
- Обеспечить совместимость с существующими компонентами и API.
- Для функциональности drag-and-drop использовать react-dnd или аналогичные библиотеки.

### 8.2 Состояние и кеширование

- Интегрировать хранение состояния Stories с использованием существующих механизмов.
- Реализовать локальное кеширование черновиков Stories для предотвращения потери данных.
- Обеспечить оптимизацию загрузки и обработки медиа для Stories.

### 8.3 Тестирование

- Реализовать модульные тесты для всех новых компонентов.
- Написать интеграционные тесты для проверки взаимодействия редактора Stories с бэкендом.
- Провести пользовательское тестирование интерфейса для Stories с фокус-группой.

## 9. Приоритезация и этапы внедрения

### 9.1 Первый этап (MVP)

- Базовый редактор с возможностью загрузки медиа в формате Stories.
- Адаптация существующих компонентов выбора платформ и планирования.
- Интеграция с существующим API публикации.

### 9.2 Второй этап (расширение функциональности)

- Расширенный редактор с наклейками, текстом и эффектами.
- Компонент аналитики для Stories.
- Архив Stories с возможностью повторной публикации.

### 9.3 Третий этап (оптимизация)

- Улучшение мобильного опыта.
- Расширенная аналитика.
- Интеграция с другими инструментами SMM Manager.

## 10. Критерии приемки

- Пользователь может создать, отредактировать и опубликовать Stories через UI.
- Система корректно определяет тип контента и маршрутизирует только в Instagram.
- Интерфейс адаптирован под специфику работы со Stories.
- Компоненты корректно работают на всех поддерживаемых браузерах и устройствах.
- Аналитика Stories доступна в интерфейсе (если реализована).
- Все новые компоненты интегрированы с существующей системой авторизации и прав доступа.