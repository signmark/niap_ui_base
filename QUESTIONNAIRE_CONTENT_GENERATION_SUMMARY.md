# Генерация контента на основе анкеты компании

## Обзор реализации
Система автономного SMM бота теперь поддерживает создание персонализированного контента на основе бизнес-анкеты компании.

## Ключевые компоненты

### 1. Сервис генерации контента (`server/content-generator-from-questionnaire.ts`)
- **QuestionnaireContentGenerator**: Основной класс для генерации контента
- **Анализ анкеты**: Извлекает ключевые данные кампании из Directus
- **Стратегия контента**: Создает темы на основе бизнес-профиля
- **ИИ-генерация**: Использует Gemini для создания персонализированного текста
- **Изображения**: Интеграция с FAL AI для создания релевантных изображений

### 2. API Endpoint
```
POST /api/generate-questionnaire-content/:campaignId
```
- Параметры: `numberOfPosts` (количество публикаций для создания)
- Автоматически создает запланированные публикации
- Возвращает детальную статистику созданного контента

### 3. Используемые данные из анкеты
- **Название компании**: Для брендинга контента
- **Описание**: Основа для контекста
- **Целевая аудитория**: Персонализация обращения
- **Тип бизнеса**: Выбор тематики контента
- **УТП**: Ключевые преимущества в постах
- **Ключевые слова**: Генерация релевантных хэштегов
- **Тон общения**: Стиль написания постов

## Пример для Nplanner.ru

### Исходные данные
```javascript
{
  name: "Nplanner.ru",
  description: "Профессиональный аналитический сервис для планирования питания",
  target_audience: "врачи, диетологи, нутрициологи, фитнес-тренеры",
  business_type: "B2B SaaS платформа",
  usp: "Экономия времени до 80%, научно обоснованные рекомендации РАМН",
  keywords: "планирование питания, диетология, нутрициология"
}
```

### Сгенерированный контент
1. **Экономия времени на 80%**
   - Обращение к врачам и диетологам
   - Упоминание конкретной цифры экономии
   - Призыв к действию
   - Хэштеги: #nplanner #диетология #экономиявремени

2. **Научные рекомендации РАМН**
   - Акцент на научном обосновании
   - Упоминание авторитетного источника
   - Профессиональный тон
   - Хэштеги: #РАМН #наука #нутрициология

3. **Автоматический анализ питания**
   - Конкретная функция продукта
   - Польза для пациентов
   - Практическое применение
   - Хэштеги: #анализпитания #отчеты #здоровье

## Преимущества подхода

### ✅ Персонализация
- Контент соответствует специфике бизнеса
- Правильное обращение к целевой аудитории
- Использование отраслевой терминологии

### ✅ Релевантность
- Хэштеги на основе ключевых слов компании
- Темы соответствуют бизнес-целям
- УТП интегрированы в каждый пост

### ✅ Автоматизация
- Полностью автоматическое создание
- Планирование публикаций
- Генерация изображений

### ✅ Масштабируемость
- Работает с любой кампанией
- Настраиваемое количество постов
- Адаптация под разные отрасли

## Технические детали

### Интеграция с ИИ
- **Gemini Vertex**: Генерация текста на основе промптов с данными анкеты
- **FAL AI**: Создание изображений по описанию
- **Fallback логика**: Гарантированное создание контента даже при сбоях ИИ

### Структура данных
```javascript
{
  title: "Заголовок поста",
  content: "Основной текст с УТП и призывом к действию",
  hashtags: ["#релевантные", "#хэштеги"],
  targetAudience: "Конкретная аудитория",
  contentType: "promotional/educational/howto",
  imagePrompt: "Описание для генерации изображения"
}
```

### Планирование публикаций
- Автоматическое распределение по времени
- Поддержка множественных платформ (VK, Telegram, Facebook)
- Интеграция с существующей системой планировщика

## Файлы проекта
- `server/content-generator-from-questionnaire.ts` - Основной сервис
- `test-questionnaire-content.js` - Тестовый скрипт
- `test-autonomous-bot-simple.js` - Демонстрация возможностей
- API route в `server/routes.ts` - Веб-интерфейс

## Статус
✅ **ГОТОВО К ИСПОЛЬЗОВАНИЮ**
- Основной функционал реализован
- API endpoint зарегистрирован
- Тестирование выполнено
- Документация создана

Система готова для создания персонализированного контента для любой компании на основе заполненной бизнес-анкеты.