# План упрощения архитектуры SMM Manager

## Текущие проблемы
- Дублирование API endpoints для одних и тех же данных
- Несогласованные форматы ответов API
- Множественные слои абстракции (storage → directus-crud → routes)
- Разные способы обработки токенов в разных частях системы
- Статусы контента не синхронизированы между UI и планировщиком

## Предлагаемые упрощения

### 1. Единые API endpoints
- **Удалить**: `/api/campaign-content/scheduled` 
- **Оставить**: `/api/publish/scheduled` (уже работает)
- **Стандартизировать**: все endpoints возвращают `{ success: boolean, data: any, error?: string }`

### 2. Единая система статусов
```
draft → scheduled → (publishing) → published/failed/partial
```
- `draft` - черновик
- `scheduled` - запланирован к публикации
- `publishing` - в процессе публикации  
- `published` - опубликован на всех платформах
- `partial` - опубликован частично (не все платформы)
- `failed` - ошибка публикации

### 3. Упрощение слоев
```
Frontend → API Routes → Directus (напрямую)
```
Убрать промежуточные слои: storage, directus-crud

### 4. Единая авторизация
- Все endpoints используют один метод проверки токенов
- Автоматическое обновление токенов везде одинаково

## Немедленные действия

1. **Удалить дублирующий endpoint** `/api/campaign-content/scheduled`
2. **Исправить фронтенд** - использовать только `/api/publish/scheduled`  
3. **Стандартизировать ответы** - все API возвращают единый формат
4. **Синхронизировать статусы** между планировщиком и UI

## Результат
- В 2 раза меньше кода
- Единая логика работы с данными
- Предсказуемое поведение системы
- Легче отладка и поддержка