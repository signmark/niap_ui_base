/**
 * –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–≤–æ–≥–æ –æ—á–∏—Å—Ç–∏—Ç–µ–ª—è HTML –¥–ª—è Telegram (CommonJS)
 * –ó–∞–ø—É—Å–∫: node telegram-html-cleaner-test.cjs
 */

// –î–ª—è –∏–º–ø–æ—Ä—Ç–∞ ES –º–æ–¥—É–ª—è –≤ CommonJS –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º dynamic import
async function runTests() {
  try {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç
    const cleaner = await import('./server/utils/telegram-html-cleaner.js');
    const { cleanHtmlForTelegram, fixUnclosedTags } = cleaner;

    function formatTestResult(title, input, expectedOutput, actualOutput, pass) {
      console.log(`\n=== –¢–ï–°–¢: ${title} ===`);
      console.log(`–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: "${input}"`);
      console.log(`–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: "${expectedOutput}"`);
      console.log(`–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: "${actualOutput}"`);
      if (pass) {
        console.log('\x1b[32m‚úì –¢–ï–°–¢ –ü–†–û–ô–î–ï–ù\x1b[0m');
      } else {
        console.log('\x1b[31m‚úó –¢–ï–°–¢ –ù–ï –ü–†–û–ô–î–ï–ù\x1b[0m');
      }
    }

    const tests = [
      {
        title: '–ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç –±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è',
        input: '–≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç –±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è',
        expectedOutput: '–≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç –±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è'
      },
      {
        title: '–ó–∞–º–µ–Ω–∞ <p> –Ω–∞ –æ–¥–∏–Ω–∞—Ä–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏',
        input: '<p>–ü–µ—Ä–≤—ã–π –ø–∞—Ä–∞–≥—Ä–∞—Ñ</p><p>–í—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–≥—Ä–∞—Ñ</p>',
        expectedOutput: '–ü–µ—Ä–≤—ã–π –ø–∞—Ä–∞–≥—Ä–∞—Ñ\n–í—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–≥—Ä–∞—Ñ\n'
      },
      {
        title: '–ë–∞–∑–æ–≤–æ–µ HTML-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
        input: '<b>–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç</b> –∏ <i>–∫—É—Ä—Å–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç</i>',
        expectedOutput: '<b>–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç</b> –∏ <i>–∫—É—Ä—Å–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç</i>'
      },
      {
        title: '–í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ç–µ–≥–∏ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º –∑–∞–∫—Ä—ã—Ç–∏—è',
        input: '<b>–ñ–∏—Ä–Ω—ã–π <i>–∫—É—Ä—Å–∏–≤–Ω—ã–π –∂–∏—Ä–Ω—ã–π</b> –ø—Ä–æ—Å—Ç–æ –∫—É—Ä—Å–∏–≤</i>',
        expectedOutput: '<b>–ñ–∏—Ä–Ω—ã–π <i>–∫—É—Ä—Å–∏–≤–Ω—ã–π –∂–∏—Ä–Ω—ã–π</i></b><i> –ø—Ä–æ—Å—Ç–æ –∫—É—Ä—Å–∏–≤</i>'
      },
      {
        title: '–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–µ–≥–∏',
        input: '<div>–≠—Ç–æ <span>—Ç–µ–∫—Å—Ç</span> —Å –ª–∏—à–Ω–∏–º–∏ <br/>—Ç–µ–≥–∞–º–∏</div>',
        expectedOutput: '–≠—Ç–æ —Ç–µ–∫—Å—Ç —Å –ª–∏—à–Ω–∏–º–∏ \n—Ç–µ–≥–∞–º–∏\n'
      },
      {
        title: '–ü–∞—Ä–∞–≥—Ä–∞—Ñ—ã –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
        input: '<p><strong>–ó–∞–≥–æ–ª–æ–≤–æ–∫</strong></p><p>–û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç</p>',
        expectedOutput: '<b>–ó–∞–≥–æ–ª–æ–≤–æ–∫</b>\n–û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç\n'
      },
      {
        title: '–ú–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫',
        input: '<ul><li>–ü—É–Ω–∫—Ç 1</li><li>–ü—É–Ω–∫—Ç 2</li><li>–ü—É–Ω–∫—Ç 3</li></ul>',
        expectedOutput: '‚Ä¢ –ü—É–Ω–∫—Ç 1\n‚Ä¢ –ü—É–Ω–∫—Ç 2\n‚Ä¢ –ü—É–Ω–∫—Ç 3\n\n'
      },
      {
        title: '–°–ª–æ–∂–Ω–æ–µ –≤–ª–æ–∂–µ–Ω–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
        input: '<p><b>–í–∞–∂–Ω–æ: <u><i>—Å—Ä–æ—á–Ω–∞—è</i></u> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</b></p>',
        expectedOutput: '<b>–í–∞–∂–Ω–æ: <u><i>—Å—Ä–æ—á–Ω–∞—è</i></u> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</b>\n'
      },
      {
        title: '–ù–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥—Ä—è–¥',
        input: '<b>–ñ–∏—Ä–Ω—ã–π</b> <i>–∫—É—Ä—Å–∏–≤</i> <u>–ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç—ã–π</u> <s>–∑–∞—á–µ—Ä–∫–Ω—É—Ç—ã–π</s>',
        expectedOutput: '<b>–ñ–∏—Ä–Ω—ã–π</b> <i>–∫—É—Ä—Å–∏–≤</i> <u>–ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç—ã–π</u> <s>–∑–∞—á–µ—Ä–∫–Ω—É—Ç—ã–π</s>'
      },
      {
        title: '–û—á–∏—Å—Ç–∫–∞ HTML-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤',
        input: '–¢–µ–∫—Å—Ç <!-- –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π --> –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ',
        expectedOutput: '–¢–µ–∫—Å—Ç  –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ'
      },
      {
        title: '–°—Å—ã–ª–∫–∞ —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º href',
        input: '<a href="https://example.com">–°—Å—ã–ª–∫–∞</a>',
        expectedOutput: '<a href="https://example.com">–°—Å—ã–ª–∫–∞</a>'
      },
      {
        title: '–ù–µ—Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞',
        input: '<p>–í —Ö–æ–¥–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ <strong>–æ–±—Å—É–∂–¥–µ–Ω–∏—è</strong> –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –ø—Ä–∏—á–∏–Ω—ã, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –∑–∞–≤—Ç—Ä–∞–∫ —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã–º –ø—Ä–∏–µ–º–æ–º –ø–∏—â–∏, –∏ –µ–≥–æ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å —ç–Ω–µ—Ä–≥–∏–∏, –º–µ—Ç–∞–±–æ–ª–∏–∑–º –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∞–ø–ø–µ—Ç–∏—Ç–∞. üòä</p><p>–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–æ–ª—å –ø–µ—Ä–µ–∫—É—Å–æ–≤, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –º–æ–≥—É—Ç –∫–∞–∫ —Å–ø–æ—Å–æ–±—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—é –∑–¥–æ—Ä–æ–≤—å—è <strong>"—Ö–æ—Ä–æ—à–µ–≥–æ"</strong>, —Ç–∞–∫ –∏ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ –Ω–∞–Ω–æ—Å–∏—Ç—å –≤—Ä–µ–¥ —Ñ–∏–≥—É—Ä–µ –∏ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—é. üçé –ü–µ—Ä–µ–∫—É—Å—ã –ø–æ–º–æ–≥–∞—é—Ç –∏–∑–±–µ–∂–∞—Ç—å —Ä–µ–∑–∫–∏—Ö –∫–æ–ª–µ–±–∞–Ω–∏–π —É—Ä–æ–≤–Ω—è —Å–∞—Ö–∞—Ä–∞ –≤ –∫—Ä–æ–≤–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –±–∞–ª–∞–Ω—Å –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç —á—Ä–µ–∑–º–µ—Ä–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –≥–æ–ª–æ–¥–∞, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞—á–∞—Å—Ç—É—é –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–µ—Ä–µ–µ–¥–∞–Ω–∏—è –≤–æ –≤—Ä–µ–º—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∏–µ–º–æ–≤ –ø–∏—â–∏. üö´</p><p>–°–ª–µ–¥—É–µ—Ç, –æ–¥–Ω–∞–∫–æ, –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –Ω–µ –≤—Å–µ –ø–µ—Ä–µ–∫—É—Å—ã –æ–¥–∏–Ω–∞–∫–æ–≤–æ –ø–æ–ª–µ–∑–Ω—ã. ‚ö†Ô∏è –ö –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–º –ø–µ—Ä–µ–∫—É—Å–∞–º –æ—Ç–Ω–æ—Å—è—Ç—Å—è —Å–ª–∞–¥–æ—Å—Ç–∏, –±—É–ª–æ—á–∫–∏, –ø–µ—á–µ–Ω—å–µ, —á–∏–ø—Å—ã –∏ –ø—Ä–æ—á–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã —Ñ–∞—Å—Ç—Ñ—É–¥–∞. üç© –û–Ω–∏ –≤—ã–∑—ã–≤–∞—é—Ç –±—ã—Å—Ç—Ä–æ–µ –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Å–∞—Ö–∞—Ä–∞ –≤ –∫—Ä–æ–≤–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø—Ä–∏–ª–∏–≤ —ç–Ω–µ—Ä–≥–∏–∏, –Ω–æ —Å—Ç–æ–ª—å –∂–µ —Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ —É—Å—Ç–∞–ª–æ—Å—Ç–∏, —É—Å–∏–ª–µ–Ω–∏—é –∞–ø–ø–µ—Ç–∏—Ç–∞ –∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—é –∂–∏—Ä–æ–≤—ã—Ö –æ—Ç–ª–æ–∂–µ–Ω–∏–π. </p><p><em>–ü–æ–ª–µ–∑–Ω—ã–º–∏ –ø–µ—Ä–µ–∫—É—Å–∞–º–∏ —è–≤–ª—è—é—Ç—Å—è —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —á—É–≤—Å—Ç–≤–æ —Å—ã—Ç–æ—Å—Ç–∏, —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –±–∞–ª–∞–Ω—Å –∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤.</em> ü•ó –ö –Ω–∏–º –º–æ–∂–Ω–æ –æ—Ç–Ω–µ—Å—Ç–∏ –æ—Ä–µ—Ö–∏, —è–≥–æ–¥—ã, —Ñ—Ä—É–∫—Ç—ã, –æ–≤–æ—â–∏ —Å —Ö—É–º—É—Å–æ–º, —è–π—Ü–∞, –≥—Ä–µ—á–µ—Å–∫–∏–π –π–æ–≥—É—Ä—Ç, —Ç–≤–æ—Ä–æ–≥, —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤—ã–µ —Ö–ª–µ–±—Ü—ã —Å –∞–≤–æ–∫–∞–¥–æ –∏–ª–∏ –æ—Ä–µ—Ö–æ–≤–æ–π –ø–∞—Å—Ç–æ–π. ü•ë üçû ü•í</p><p>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –ø–µ—Ä–µ–∫—É—Å—ã–≤–∞–Ω–∏—é: üìù</p><ul><li>–í—ã–±–∏—Ä–∞–π—Ç–µ –ø–µ—Ä–µ–∫—É—Å—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –±–µ–ª–æ–∫, –ø–æ–ª–µ–∑–Ω—ã–µ –∂–∏—Ä—ã –∏ –∫–ª–µ—Ç—á–∞—Ç–∫—É ‚Äì –æ–Ω–∏ –¥–æ–ª—å—à–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —á—É–≤—Å—Ç–≤–æ —Å—ã—Ç–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –æ–±–º–µ–Ω –≤–µ—â–µ—Å—Ç–≤. üëç</li><li>–ù–µ —É–ø–æ—Ç—Ä–µ–±–ª—è–π—Ç–µ –ø–∏—â—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äì –ø–µ—Ä–µ–∫—É—Å –Ω–µ–æ–±—Ö–æ–¥–∏–º, –µ—Å–ª–∏ –≤—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ –ª–µ–≥–∫–æ–µ —á—É–≤—Å—Ç–≤–æ –≥–æ–ª–æ–¥–∞, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–æ –ø—Ä–∏–≤—ã—á–∫–µ –∏–ª–∏ –æ—Ç —Å–∫—É–∫–∏. ü§î</li><li>–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ —Ä–∞–∑–º–µ—Ä –ø–æ—Ä—Ü–∏–∏ ‚Äì –≥–æ—Ä—Å—Ç—å –æ—Ä–µ—Ö–æ–≤ –ø–æ–ª–µ–∑–Ω–∞, –Ω–æ –µ—Å–ª–∏ —Å—ä–µ—Å—Ç—å –ø–æ–ª–ø–∞–∫–µ—Ç–∞, —ç—Ç–æ —É–∂–µ —Å—Ç–∞–Ω–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º –ø—Ä–∏–µ–º–æ–º –ø–∏—â–∏. ü•ú</li></ul><p>–ï—Å–ª–∏ –≤—ã —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –≤–æ–ø—Ä–æ—Å–∞—Ö –ø–∏—Ç–∞–Ω–∏—è, –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –≤—Ä–µ–¥–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫ –∏ –≤—ã—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–º—Ñ–æ—Ä—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø–∏—Ç–∞–Ω–∏—è, –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É –º–∞—Ä–∞—Ñ–æ–Ω—É –Ω–∞ –Ω–∞—à–µ–º —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–µ. üì±</p>',
        expectedOutput: `–í —Ö–æ–¥–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ <b>–æ–±—Å—É–∂–¥–µ–Ω–∏—è</b> –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –ø—Ä–∏—á–∏–Ω—ã, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –∑–∞–≤—Ç—Ä–∞–∫ —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã–º –ø—Ä–∏–µ–º–æ–º –ø–∏—â–∏, –∏ –µ–≥–æ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å —ç–Ω–µ—Ä–≥–∏–∏, –º–µ—Ç–∞–±–æ–ª–∏–∑–º –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∞–ø–ø–µ—Ç–∏—Ç–∞. üòä
–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–æ–ª—å –ø–µ—Ä–µ–∫—É—Å–æ–≤, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –º–æ–≥—É—Ç –∫–∞–∫ —Å–ø–æ—Å–æ–±—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—é –∑–¥–æ—Ä–æ–≤—å—è <b>"—Ö–æ—Ä–æ—à–µ–≥–æ"</b>, —Ç–∞–∫ –∏ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ –Ω–∞–Ω–æ—Å–∏—Ç—å –≤—Ä–µ–¥ —Ñ–∏–≥—É—Ä–µ –∏ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—é. üçé –ü–µ—Ä–µ–∫—É—Å—ã –ø–æ–º–æ–≥–∞—é—Ç –∏–∑–±–µ–∂–∞—Ç—å —Ä–µ–∑–∫–∏—Ö –∫–æ–ª–µ–±–∞–Ω–∏–π —É—Ä–æ–≤–Ω—è —Å–∞—Ö–∞—Ä–∞ –≤ –∫—Ä–æ–≤–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –±–∞–ª–∞–Ω—Å –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç —á—Ä–µ–∑–º–µ—Ä–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –≥–æ–ª–æ–¥–∞, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞—á–∞—Å—Ç—É—é –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–µ—Ä–µ–µ–¥–∞–Ω–∏—è –≤–æ –≤—Ä–µ–º—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∏–µ–º–æ–≤ –ø–∏—â–∏. üö´
–°–ª–µ–¥—É–µ—Ç, –æ–¥–Ω–∞–∫–æ, –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –Ω–µ –≤—Å–µ –ø–µ—Ä–µ–∫—É—Å—ã –æ–¥–∏–Ω–∞–∫–æ–≤–æ –ø–æ–ª–µ–∑–Ω—ã. ‚ö†Ô∏è –ö –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–º –ø–µ—Ä–µ–∫—É—Å–∞–º –æ—Ç–Ω–æ—Å—è—Ç—Å—è —Å–ª–∞–¥–æ—Å—Ç–∏, –±—É–ª–æ—á–∫–∏, –ø–µ—á–µ–Ω—å–µ, —á–∏–ø—Å—ã –∏ –ø—Ä–æ—á–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã —Ñ–∞—Å—Ç—Ñ—É–¥–∞. üç© –û–Ω–∏ –≤—ã–∑—ã–≤–∞—é—Ç –±—ã—Å—Ç—Ä–æ–µ –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Å–∞—Ö–∞—Ä–∞ –≤ –∫—Ä–æ–≤–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø—Ä–∏–ª–∏–≤ —ç–Ω–µ—Ä–≥–∏–∏, –Ω–æ —Å—Ç–æ–ª—å –∂–µ —Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ —É—Å—Ç–∞–ª–æ—Å—Ç–∏, —É—Å–∏–ª–µ–Ω–∏—é –∞–ø–ø–µ—Ç–∏—Ç–∞ –∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—é –∂–∏—Ä–æ–≤—ã—Ö –æ—Ç–ª–æ–∂–µ–Ω–∏–π. 
<i>–ü–æ–ª–µ–∑–Ω—ã–º–∏ –ø–µ—Ä–µ–∫—É—Å–∞–º–∏ —è–≤–ª—è—é—Ç—Å—è —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —á—É–≤—Å—Ç–≤–æ —Å—ã—Ç–æ—Å—Ç–∏, —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –±–∞–ª–∞–Ω—Å –∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤.</i> ü•ó –ö –Ω–∏–º –º–æ–∂–Ω–æ –æ—Ç–Ω–µ—Å—Ç–∏ –æ—Ä–µ—Ö–∏, —è–≥–æ–¥—ã, —Ñ—Ä—É–∫—Ç—ã, –æ–≤–æ—â–∏ —Å —Ö—É–º—É—Å–æ–º, —è–π—Ü–∞, –≥—Ä–µ—á–µ—Å–∫–∏–π –π–æ–≥—É—Ä—Ç, —Ç–≤–æ—Ä–æ–≥, —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤—ã–µ —Ö–ª–µ–±—Ü—ã —Å –∞–≤–æ–∫–∞–¥–æ –∏–ª–∏ –æ—Ä–µ—Ö–æ–≤–æ–π –ø–∞—Å—Ç–æ–π. ü•ë üçû ü•í
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –ø–µ—Ä–µ–∫—É—Å—ã–≤–∞–Ω–∏—é: üìù
‚Ä¢ –í—ã–±–∏—Ä–∞–π—Ç–µ –ø–µ—Ä–µ–∫—É—Å—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –±–µ–ª–æ–∫, –ø–æ–ª–µ–∑–Ω—ã–µ –∂–∏—Ä—ã –∏ –∫–ª–µ—Ç—á–∞—Ç–∫—É ‚Äì –æ–Ω–∏ –¥–æ–ª—å—à–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —á—É–≤—Å—Ç–≤–æ —Å—ã—Ç–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –æ–±–º–µ–Ω –≤–µ—â–µ—Å—Ç–≤. üëç
‚Ä¢ –ù–µ —É–ø–æ—Ç—Ä–µ–±–ª—è–π—Ç–µ –ø–∏—â—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äì –ø–µ—Ä–µ–∫—É—Å –Ω–µ–æ–±—Ö–æ–¥–∏–º, –µ—Å–ª–∏ –≤—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ –ª–µ–≥–∫–æ–µ —á—É–≤—Å—Ç–≤–æ –≥–æ–ª–æ–¥–∞, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–æ –ø—Ä–∏–≤—ã—á–∫–µ –∏–ª–∏ –æ—Ç —Å–∫—É–∫–∏. ü§î
‚Ä¢ –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ —Ä–∞–∑–º–µ—Ä –ø–æ—Ä—Ü–∏–∏ ‚Äì –≥–æ—Ä—Å—Ç—å –æ—Ä–µ—Ö–æ–≤ –ø–æ–ª–µ–∑–Ω–∞, –Ω–æ –µ—Å–ª–∏ —Å—ä–µ—Å—Ç—å –ø–æ–ª–ø–∞–∫–µ—Ç–∞, —ç—Ç–æ —É–∂–µ —Å—Ç–∞–Ω–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º –ø—Ä–∏–µ–º–æ–º –ø–∏—â–∏. ü•ú

–ï—Å–ª–∏ –≤—ã —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –≤–æ–ø—Ä–æ—Å–∞—Ö –ø–∏—Ç–∞–Ω–∏—è, –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –≤—Ä–µ–¥–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫ –∏ –≤—ã—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–º—Ñ–æ—Ä—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø–∏—Ç–∞–Ω–∏—è, –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É –º–∞—Ä–∞—Ñ–æ–Ω—É –Ω–∞ –Ω–∞—à–µ–º —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–µ. üì±`
      }
    ];

    let passedCount = 0;
    let failedCount = 0;

    for (const test of tests) {
      const actualOutput = cleanHtmlForTelegram(test.input);
      const pass = actualOutput === test.expectedOutput;
      formatTestResult(test.title, test.input, test.expectedOutput, actualOutput, pass);
      
      if (pass) {
        passedCount++;
      } else {
        failedCount++;
      }
    }

    console.log(`\n=== –ò–¢–û–ì–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø ===`);
    console.log(`–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: ${tests.length}`);
    console.log(`\x1b[32m–ü—Ä–æ–π–¥–µ–Ω–æ: ${passedCount}\x1b[0m`);
    console.log(`\x1b[31m–ù–µ –ø—Ä–æ–π–¥–µ–Ω–æ: ${failedCount}\x1b[0m`);
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤:', error);
  }
}

// –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã
console.log('–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –Ω–æ–≤–æ–≥–æ –æ—á–∏—Å—Ç–∏—Ç–µ–ª—è HTML –¥–ª—è Telegram...');
runTests();