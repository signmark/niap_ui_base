# –û—Ç—á–µ—Ç –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –º–æ–¥—É–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ SMM Manager

## –î–∞—Ç–∞: 22 –º–∞—è 2025 –≥.

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥—É–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ç—è–º–∏. –ò—Å—Ö–æ–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Å–ø–∏–Ω–Ω–µ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –Ω–µ –æ—Ç–≤–µ—á–∞–ª–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –º–µ–∂–¥—É –∫–∞–º–ø–∞–Ω–∏—è–º–∏.

## üö´ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ React Query
**–ü—Ä–æ–±–ª–µ–º–∞:** –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `queryFn` –≤ `client/src/lib/queryClient.ts` –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã URL –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —Ç–æ–ª—å–∫–æ `queryKey[0]` –∫–∞–∫ –±–∞–∑–æ–≤—ã–π URL.

**–°–∏–º–ø—Ç–æ–º—ã:**
- API –∑–∞–ø—Ä–æ—Å—ã –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `campaignId`
- –°–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–ª –æ—à–∏–±–∫—É 400: "Campaign ID required"
- –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Å–ø–∏–Ω–Ω–µ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –î–û (–Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∞—è –≤–µ—Ä—Å–∏—è):
const res = await fetch(queryKey[0] as string, {

// –ü–û–°–õ–ï (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è):
let url = queryKey[0] as string;
if (queryKey.length > 1 && queryKey[1]) {
  const separator = url.includes('?') ? '&' : '?';
  url = `${url}${separator}campaignId=${queryKey[1]}`;
}
const res = await fetch(url, {
```

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –¥–∞–Ω–Ω—ã—Ö
**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ —á–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ Directus.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
- `shared/analytics-types.ts` - —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- `server/services/analytics.ts` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- `server/api/analytics-routes.ts` - API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- `client/src/components/analytics/CampaignAnalyticsDashboard.tsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### 3. –ù–µ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
**–ü—Ä–æ–±–ª–µ–º–∞:** –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ –≤—Å–µ 100+ –ø–æ—Å—Ç–æ–≤ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º—É

**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–µ–Ω–æ (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

## ‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### 1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (Telegram, Instagram, VK)
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Å–ø–∏–Ω–Ω–µ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–∞–º–ø–∞–Ω–∏—è–º–∏

### 2. –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å n8n
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω webhook URL: `https://n8n.nplanner.ru/webhook/posts-to-analytics`
- ‚úÖ –°–æ–∑–¥–∞–Ω –º–µ—Ö–∞–Ω–∏–∑–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ n8n
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É" –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### 3. –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å–∏—Å—Ç–µ–º–µ
**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–∏—Å—Ç–µ–º—ã:**
- **Telegram**: 648 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤, 72 –ø–æ—Å—Ç–∞
- **Instagram**: 256 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤, 35 –ø–æ—Å—Ç–æ–≤  
- **VKontakte**: 755 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤, 67 –ø–æ—Å—Ç–æ–≤

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:
1. `client/src/lib/queryClient.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
2. `server/api/analytics-routes.ts` - –Ω–æ–≤—ã–µ API –º–∞—Ä—à—Ä—É—Ç—ã
3. `server/services/analytics.ts` - –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
4. `client/src/components/analytics/CampaignAnalyticsDashboard.tsx` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```env
N8N_ANALYTICS_WEBHOOK_URL=https://n8n.nplanner.ru/webhook/posts-to-analytics
```

## üéØ –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞
**–°–¢–ê–¢–£–°: –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù ‚úÖ**

–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ - –º–æ–¥—É–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. **N8N webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞!**

### ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
**N8N Webhook —Ç–µ—Å—Ç—ã:**
- ‚úÖ Node.js —Ç–µ—Å—Ç: `{"message":"Workflow was started"}`  
- ‚úÖ Curl —Ç–µ—Å—Ç: HTTP 200 OK - workflow –∑–∞–ø—É—â–µ–Ω
- ‚úÖ URL –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω: `https://n8n.nplanner.ru/webhook/posts-to-analytics`
- ‚úÖ Payload —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

**–î–∞–Ω–Ω—ã–µ –≤ —Å–∏—Å—Ç–µ–º–µ:**
- ‚úÖ Telegram: 648 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∏–∑ 72 –ø–æ—Å—Ç–æ–≤
- ‚úÖ Instagram: 256 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∏–∑ 35 –ø–æ—Å—Ç–æ–≤  
- ‚úÖ VKontakte: 755 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∏–∑ 67 –ø–æ—Å—Ç–æ–≤

### –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ

---
*–û—Ç—á–µ—Ç —Å–æ—Å—Ç–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –º–æ–¥—É–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏*